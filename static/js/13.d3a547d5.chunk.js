(this["webpackJsonpcms-admin-developh"]=this["webpackJsonpcms-admin-developh"]||[]).push([[13],{617:function(e,t,n){"use strict";t.a={domain:"https://damp-river-04072.herokuapp.com",METHOD:{GET:"get",POST:"post",PUT:"put",DELETE:"delete"},limit:10}},618:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(615),r=n.n(a),c=n(616),s=n(156),u=n(157),o=n(624),i=n.n(o),l=null,d=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,[{key:"startRequest",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){var c,s,u,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.length>3&&void 0!==o[3]?o[3]:"",e.prev=1,s=localStorage.getItem("access_token")||"",i.a.defaults.headers.common["Content-Type"]="application/json",e.next=6,i()({method:t,url:n,data:a,params:c,headers:{authorization:"Bearer ".concat(s)}});case 6:return u=e.sent,e.abrupt("return",u.data);case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return null==l&&(l=new e),l}}]),e}()},629:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(615),r=n.n(a),c=n(616),s=n(156),u=n(157),o=n(617),i=n(618),l=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"getListStudent",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getInstance().startRequest(o.a.METHOD.GET,"".concat(o.a.domain,"/api/students/all"),{},t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStudentByUsername",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getInstance().startRequest(o.a.METHOD.GET,"".concat(o.a.domain,"/api/students/get/").concat(t),{});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createStudent",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getInstance().startRequest(o.a.METHOD.POST,"".concat(o.a.domain,"/api/students/create"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateStudent",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getInstance().startRequest(o.a.METHOD.PUT,"".concat(o.a.domain,"/api/students/update/").concat(t),n);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"banStudent",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getInstance().startRequest(o.a.METHOD.DELETE,"".concat(o.a.domain,"/api/students/").concat(t),{});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},690:function(e,t,n){"use strict";n.r(t);var a=n(615),r=n.n(a),c=n(616),s=n(631),u=n(621),o=n(1),i=n.n(o),l=n(627),d=n.n(l),m=n(158),p=n(619),h=n(623),f=(n(622),n(629)),b=n(617),g=function(e){switch(e){case"Active":return"success";case"Banned":return"danger";default:return"primary"}},v=[{key:"stt",label:"STT",_style:{width:"1%"}},{key:"name",label:"H\u1ecd v\xe0 t\xean"},{key:"username",label:"T\xean \u0111\u0103ng nh\u1eadp"},{key:"email",label:"Email"},{key:"phone_number",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"},{key:"address",label:"\u0110\u1ecba ch\u1ec9"},{key:"status",label:"Tr\u1ea1ng th\xe1i"},{key:"show_details",label:"",_style:{width:"1%"},sorter:!1,filter:!1}];t.default=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],l=Object(o.useState)({loadingGet:!1,loadingBan:!1}),E=Object(u.a)(l,2),O=E[0],k=E[1],y=Object(o.useState)([]),w=Object(u.a)(y,2),j=w[0],T=w[1],x=Object(o.useState)(!1),S=Object(u.a)(x,2),B=S[0],C=S[1],I=Object(o.useState)(""),H=Object(u.a)(I,2),_=H[0],D=H[1],G=Object(o.useState)(!1),M=Object(u.a)(G,2),L=M[0],N=M[1],P=Object(o.useCallback)(Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({loadingBan:!1,loadingGet:!0}),e.prev=1,e.next=4,f.a.getListStudent();case 4:(t=e.sent)&&t.data&&(n=t.data.students.map((function(e,t){return{stt:t+1,name:e.info.name,username:e.username,email:e.email,phone_number:e.info.phone_number,address:e.info.address,status:e.active?"Active":"Banned",register_at:d()(e.register_at).local().format("DD/MM/YYYY HH:mm")}})),a(n)),k({loadingBan:!1,loadingGet:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),z(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[]);Object(o.useEffect)((function(){P()}),[P]);var R=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({loadingBan:!0,loadingGet:!1}),e.prev=1,e.next=4,f.a.banStudent(_);case 4:z("Th\xe0nh c\xf4ng",!0),k({loadingBan:!1,loadingGet:!1}),C(!1),P(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),z(e.t0.response.data.message,!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(t),D(n),N(a);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),z=function(e,t){t?h.b.success(e,{position:h.b.POSITION.BOTTOM_RIGHT,autoClose:2e3}):h.b.error(e,{position:h.b.POSITION.BOTTOM_RIGHT,autoClose:2e3})};return i.a.createElement(p.O,null,i.a.createElement(p.k,{xs:"12",lg:"12"},i.a.createElement(p.f,null,i.a.createElement(p.j,null,i.a.createElement("strong",null,"Danh s\xe1ch h\u1ecdc sinh")),i.a.createElement(p.g,{className:"text-center"},O.loadingGet?i.a.createElement(p.X,{style:{width:"4rem",height:"4rem"},color:"info"}):i.a.createElement(p.o,{items:n,fields:v,itemsPerPage:b.a.limit,tableFilter:!0,columnFilter:!0,hover:!0,pagination:!0,scopedSlots:{status:function(e){return i.a.createElement("td",null,i.a.createElement(p.a,{color:g(e.status)},e.status))},show_details:function(e,t){return i.a.createElement("td",{className:"py-2"},i.a.createElement(p.e,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){!function(e){var t=j.indexOf(e),n=j.slice();-1!==t?n.splice(t,1):n=[].concat(Object(s.a)(j),[e]),T(n)}(t)}},j.includes(t)?"Hide":"Show"))},details:function(e,t){return i.a.createElement(p.l,{show:j.includes(t)},i.a.createElement(p.g,null,i.a.createElement("h4",null,e.name),i.a.createElement("p",{className:"text-muted"},"Updated at: ",e.register_at),i.a.createElement(m.b,{to:"/students/update/".concat(e.username)},i.a.createElement(p.e,{size:"sm",color:"info"},"C\u1eadp nh\u1eadt")),"Active"===e.status?i.a.createElement(p.e,{disabled:O.loadingBan,onClick:function(){return q(!0,e.username,!0)},size:"sm",color:"danger",className:"ml-1"},O.loadingBan?"...Loading":"C\u1ea5m ho\u1ea1t \u0111\u1ed9ng"):i.a.createElement(p.e,{disabled:O.loadingBan,onClick:function(){return q(!0,e.username,!1)},size:"sm",color:"success",className:"ml-1"},O.loadingBan?"...Loading":"Cho ph\xe9p ho\u1ea1t \u0111\u1ed9ng")))}}})),i.a.createElement(p.h,null,i.a.createElement(m.b,{to:"/students/add"},i.a.createElement(p.e,{color:"primary",className:"float-right"},"Th\xeam h\u1ecdc sinh"))))),i.a.createElement(p.I,{show:B,onClose:C},i.a.createElement(p.L,{closeButton:!0},i.a.createElement(p.M,null,L?"C\u1ea5m ho\u1ea1t \u0111\u1ed9ng":"Cho ph\xe9p ho\u1ea1t \u0111\u1ed9ng")),i.a.createElement(p.J,null,L?"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1ea5m ho\u1ea1t \u0111\u1ed9ng v\u1edbi h\u1ecdc sinh n\xe0y ?":"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n cho ph\xe9p h\u1ecdc sinh n\xe0y ho\u1ea1t \u0111\u1ed9ng ?"),i.a.createElement(p.K,null,i.a.createElement(p.e,{disabled:O.loadingBan,color:"primary",onClick:function(){return R()}},O.loadingBan?"...Loading":"\u0110\u1ed3ng \xfd")," ",i.a.createElement(p.e,{color:"secondary",onClick:function(){return C(!1)}},"Hu\u1ef7"))))}}}]);
//# sourceMappingURL=13.d3a547d5.chunk.js.map