{"version":3,"sources":["config.js","views/services/requestManager.js","views/services/subjectService.js","views/Subjects/index.js"],"names":["domain","METHOD","GET","POST","PUT","DELETE","limit","instance","ManagerRequest","method","url","body","params","access_token","localStorage","getItem","axios","defaults","headers","common","data","response","SubjectService","requestManager","getInstance","startRequest","config","id","fields","key","label","_style","width","sorter","filter","Subjects","useState","subjectsData","setSubjectData","loadingGet","loadingDelete","loading","setLoading","details","setDetails","modal","setModal","idSubject","setIdSubject","fetchData","useCallback","a","getListSubject","subjects","map","item","idx","stt","_id","name","description","updated_at","moment","local","format","showNotification","message","useEffect","deleteSubject","openModalDelete","status","toast","success","position","POSITION","BOTTOM_RIGHT","autoClose","error","xs","lg","className","style","height","color","items","itemsPerPage","bordered","tableFilter","hover","pagination","scopedSlots","index","variant","shape","size","onClick","indexOf","newDetails","slice","splice","toggleDetails","includes","show","to","disabled","onClose","closeButton"],"mappings":"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","file":"static/js/16.7708f9b5.chunk.js","sourcesContent":["export default {\n    // http://localhost:8080\n    // https://damp-river-04072.herokuapp.com\n    domain: \"https://damp-river-04072.herokuapp.com\",\n    METHOD: {\n        GET: 'get',\n        POST: 'post',\n        PUT: 'put',\n        DELETE: 'delete'\n    },\n    limit: 10\n}","import axios from \"axios\";\n\nlet instance = null;\n\nexport default class ManagerRequest {\n    static getInstance() {\n        if (instance == null) {\n            instance = new ManagerRequest();\n        }\n        return instance;\n    }\n\n    async startRequest(method, url, body, params = '') {\n        try {\n            const access_token = localStorage.getItem(\"access_token\") || '';\n            axios.defaults.headers.common['Content-Type'] = \"application/json\";\n            const response = await axios({\n                method: method,\n                url: url,\n                data: body,\n                params,\n                headers: {\n                    'authorization': `Bearer ${access_token}`\n                }\n            })\n            return response.data;\n        } catch (e) {\n            throw e;\n        }\n    }\n}","import config from \"../../config\";\nimport requestManager from \"./requestManager\";\n\nexport default class SubjectService {\n\n  static async getListSubject(params) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.GET,\n      `${config.domain}/api/subjects/all`,\n      {},\n      params\n    )\n    return response;\n  }\n\n  static async getSubjectById(id) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.GET,\n      `${config.domain}/api/subjects/get/${id}`,\n      {}\n    )\n    return response;\n  }\n\n  static async createSubject(data) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.POST,\n      `${config.domain}/api/subjects/create`,\n      data\n    )\n    return response;\n  }\n\n  static async updateSubject(id, data) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.PUT,\n      `${config.domain}/api/subjects/update/${id}`,\n      data\n    )\n    return response;\n  }\n\n  static async deleteSubject(id) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.DELETE,\n      `${config.domain}/api/subjects/${id}`,\n      {}\n    )\n    return response;\n  }\n\n}","import React, { useState, useEffect, useCallback } from 'react';\nimport moment from 'moment-timezone';\nimport { Link } from \"react-router-dom\";\nimport {\n  CCard,\n  CCardBody, CCardFooter,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CSpinner,\n  CModal, CModalHeader, CModalBody, CModalFooter, CModalTitle,\n  CButton,\n  CCollapse\n} from '@coreui/react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport SubjectService from \"../services/subjectService\";\nimport config from \"../../config\";\n\nconst fields = [{ key: \"stt\", label: \"STT\", _style: { width: '1%' } }, { key: \"name\", label: \"Tên môn học\" }, { key: \"description\", label: \"Mô tả\" }, {\n  key: 'show_details',\n  label: '',\n  _style: { width: '1%' },\n  sorter: false,\n  filter: false\n}]\n\nconst Subjects = () => {\n  const [subjectsData, setSubjectData] = useState([]);\n  const [loading, setLoading] = useState({ loadingGet: false, loadingDelete: false });\n  const [details, setDetails] = useState([]);\n  const [modal, setModal] = useState(false);\n  const [idSubject, setIdSubject] = useState(\"\");\n\n  const toggleDetails = (index) => {\n    const position = details.indexOf(index)\n    let newDetails = details.slice()\n    if (position !== -1) {\n      newDetails.splice(position, 1)\n    } else {\n      newDetails = [...details, index]\n    }\n    setDetails(newDetails)\n  }\n\n  const fetchData = useCallback(async () => {\n    setLoading({ loadingDelete: false, loadingGet: true });\n    try {\n      const response = await SubjectService.getListSubject();\n      if (response && response.data) {\n        const subjectsData = response.data.subjects.map((item, idx) => ({ stt: idx + 1, _id: item._id, name: item.name, description: item.description, updated_at: moment(item.updated_at).local().format('DD/MM/YYYY HH:mm') }));\n        setSubjectData(subjectsData);\n      }\n      setLoading({ loadingDelete: false, loadingGet: false });\n    } catch (error) {\n      showNotification(error.response.data.message);\n    }\n  }, [])\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const deleteSubject = async () => {\n    setLoading({ loadingDelete: true, loadingGet: false });\n    try {\n      await SubjectService.deleteSubject(idSubject);\n      showNotification(\"Thành công\", true);\n      setLoading({ loadingDelete: false, loadingGet: false });\n      setModal(false);\n      fetchData();\n    } catch (error) {\n      showNotification(error.response.data.message, false);\n    }\n  }\n\n  const openModalDelete = async (status, idSubject) => {\n    setModal(status);\n    setIdSubject(idSubject);\n  }\n\n  const showNotification = (message, status) => {\n    if (status) {\n      toast.success(message, {\n        position: toast.POSITION.BOTTOM_RIGHT,\n        autoClose: 2000\n      })\n    } else {\n      toast.error(message, {\n        position: toast.POSITION.BOTTOM_RIGHT,\n        autoClose: 2000\n      })\n    }\n  }\n\n  return (\n    <CRow>\n      <CCol xs=\"12\" lg=\"12\">\n        <CCard>\n          <CCardHeader>\n            <strong>Danh sách môn học</strong>\n          </CCardHeader>\n          <CCardBody className=\"text-center\">\n            {\n              loading.loadingGet ? <CSpinner\n                style={{ width: \"4rem\", height: \"4rem\" }}\n                color=\"info\"\n              /> : <CDataTable\n                  items={subjectsData}\n                  fields={fields}\n                  itemsPerPage={config.limit}\n                  bordered\n                  tableFilter\n                  hover\n                  pagination\n                  scopedSlots={{\n                    'show_details':\n                      (item, index) => {\n                        return (\n                          <td className=\"py-2\">\n                            <CButton\n                              color=\"primary\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              onClick={() => { toggleDetails(index) }}\n                            >\n                              {details.includes(index) ? 'Hide' : 'Show'}\n                            </CButton>\n                          </td>\n                        )\n                      },\n                    'details':\n                      (item, index) => {\n                        return (\n                          <CCollapse show={details.includes(index)}>\n                            <CCardBody>\n                              <h4>\n                                {item.name}\n                              </h4>\n                              <p className=\"text-muted\">Updated at: {item.updated_at}</p>\n                              <Link to={`/classrooms/subject/update/${item._id}`}>\n                                <CButton size=\"sm\" color=\"info\">Cập nhật</CButton>\n                              </Link>\n                              <CButton disabled={loading.loadingDelete} onClick={() => openModalDelete(true, item._id)} size=\"sm\" color=\"danger\" className=\"ml-1\">\n                                {loading.loadingDelete ? \"...Loading\" : \"Xoá\"}\n                              </CButton>\n                            </CCardBody>\n                          </CCollapse>\n                        )\n                      }\n                  }}\n                />\n            }\n          </CCardBody>\n          <CCardFooter>\n            <Link to=\"/classrooms/subject/add\">\n              <CButton color=\"primary\" className=\"float-right\">Thêm môn học</CButton>\n            </Link>\n          </CCardFooter>\n        </CCard>\n      </CCol>\n      <CModal\n        show={modal}\n        onClose={setModal}\n      >\n        <CModalHeader closeButton>\n          <CModalTitle>Xoá môn học</CModalTitle>\n        </CModalHeader>\n        <CModalBody>\n          Bạn chắc chắn muốn xoá môn học này ?\n        </CModalBody>\n        <CModalFooter>\n          <CButton disabled={loading.loadingDelete} color=\"primary\" onClick={() => deleteSubject()}>{loading.loadingDelete ? \"...Loading\" : \"Đồng ý\"}</CButton>{' '}\n          <CButton\n            color=\"secondary\"\n            onClick={() => setModal(false)}\n          >Huỷ</CButton>\n        </CModalFooter>\n      </CModal>\n    </CRow>\n  )\n}\n\nexport default Subjects\n"],"sourceRoot":""}