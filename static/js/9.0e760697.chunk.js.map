{"version":3,"sources":["config.js","views/services/requestManager.js","views/services/classRoomService.js","views/ClassRooms/index.js"],"names":["domain","METHOD","GET","POST","PUT","DELETE","limit","instance","ManagerRequest","method","url","body","params","access_token","localStorage","getItem","axios","defaults","headers","common","data","response","ClassRoomService","requestManager","getInstance","startRequest","config","id","fields","key","label","_style","width","sorter","filter","Students","useState","classRoomData","setClassRoomData","loadingGet","loadingBan","loading","setLoading","details","setDetails","modal","setModal","idClassRoom","setIdClassRoom","fetchData","useCallback","a","classRoomService","getListClassRoom","listClassRoom","map","item","idx","stt","_id","name","subject","updated_at","moment","local","format","showNotification","message","useEffect","deleteClassRoom","loadingDelete","openModalDelete","status","toast","success","position","POSITION","BOTTOM_RIGHT","autoClose","error","xs","lg","className","style","height","color","items","tableFilter","hover","scopedSlots","index","variant","shape","size","onClick","indexOf","newDetails","slice","splice","toggleDetails","includes","show","to","disabled","onClose","closeButton"],"mappings":"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","file":"static/js/9.0e760697.chunk.js","sourcesContent":["export default {\n    // http://localhost:8080\n    // https://damp-river-04072.herokuapp.com\n    domain: \"https://damp-river-04072.herokuapp.com\",\n    METHOD: {\n        GET: 'get',\n        POST: 'post',\n        PUT: 'put',\n        DELETE: 'delete'\n    },\n    limit: 10\n}","import axios from \"axios\";\n\nlet instance = null;\n\nexport default class ManagerRequest {\n    static getInstance() {\n        if (instance == null) {\n            instance = new ManagerRequest();\n        }\n        return instance;\n    }\n\n    async startRequest(method, url, body, params = '') {\n        try {\n            const access_token = localStorage.getItem(\"access_token\") || '';\n            axios.defaults.headers.common['Content-Type'] = \"application/json\";\n            const response = await axios({\n                method: method,\n                url: url,\n                data: body,\n                params,\n                headers: {\n                    'authorization': `Bearer ${access_token}`\n                }\n            })\n            return response.data;\n        } catch (e) {\n            throw e;\n        }\n    }\n}","import config from \"../../config\";\nimport requestManager from \"./requestManager\";\n\nexport default class ClassRoomService {\n\n  static async getListClassRoom(params) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.GET,\n      `${config.domain}/api/classrooms/all`,\n      {},\n      params\n    )\n    return response;\n  }\n\n  static async getClassRoomById(id) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.GET,\n      `${config.domain}/api/classrooms/get/${id}`,\n      {}\n    )\n    return response;\n  }\n\n  static async createClassRoom(data) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.POST,\n      `${config.domain}/api/classrooms/create`,\n      data\n    )\n    return response;\n  }\n\n  static async updateClassRoom(id, data) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.PUT,\n      `${config.domain}/api/classrooms/update/${id}`,\n      data\n    )\n    return response;\n  }\n\n  static async deleteClassRoom(id) {\n    const response = await requestManager.getInstance().startRequest(config.METHOD.DELETE,\n      `${config.domain}/api/classrooms/${id}`,\n      {}\n    )\n    return response;\n  }\n\n}","import React, { useState, useEffect, useCallback } from 'react';\nimport moment from 'moment-timezone';\nimport { Link } from \"react-router-dom\";\nimport {\n  CCard,\n  CCardBody, CCardFooter,\n  CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CSpinner,\n  CModal, CModalHeader, CModalBody, CModalFooter, CModalTitle,\n  CButton,\n  CCollapse\n} from '@coreui/react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport classRoomService from \"../services/classRoomService\";\n\nconst fields = [{ key: \"stt\", label: \"STT\", _style: { width: '1%' } }, { key: \"name\", label: \"Tên lớp học\" }, { key: \"subject\", label: \"Tên môn học\" }, {\n  key: 'show_details',\n  label: '',\n  _style: { width: '1%' },\n  sorter: false,\n  filter: false\n}]\n\nconst Students = () => {\n  const [classRoomData, setClassRoomData] = useState([]);\n  const [loading, setLoading] = useState({ loadingGet: false, loadingBan: false });\n  const [details, setDetails] = useState([]);\n  const [modal, setModal] = useState(false);\n  const [idClassRoom, setIdClassRoom] = useState(\"\");\n\n  const toggleDetails = (index) => {\n    const position = details.indexOf(index)\n    let newDetails = details.slice()\n    if (position !== -1) {\n      newDetails.splice(position, 1)\n    } else {\n      newDetails = [...details, index]\n    }\n    setDetails(newDetails)\n  }\n\n  const fetchData = useCallback(async () => {\n    setLoading({ loadingBan: false, loadingGet: true });\n    try {\n      const response = await classRoomService.getListClassRoom();\n      if (response && response.data) {\n        const classRoomData = response.data.listClassRoom.map((item, idx) => ({ stt: idx + 1, _id: item._id, name: item.name, subject: item.subject.name, updated_at: moment(item.updated_at).local().format('DD/MM/YYYY HH:mm') }));\n        setClassRoomData(classRoomData);\n      }\n      setLoading({ loadingBan: false, loadingGet: false });\n    } catch (error) {\n      showNotification(error.response.data.message);\n    }\n  }, [])\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const deleteClassRoom = async () => {\n    setLoading({ loadingDelete: true, loadingGet: false });\n    try {\n      await classRoomService.deleteClassRoom(idClassRoom);\n      showNotification(\"Thành công\", true);\n      setLoading({ loadingDelete: false, loadingGet: false });\n      setModal(false);\n      fetchData();\n    } catch (error) {\n      showNotification(error.response.data.message, false);\n    }\n  }\n\n  const openModalDelete = async (status, idClassRoom) => {\n    setModal(status);\n    setIdClassRoom(idClassRoom);\n  }\n\n  const showNotification = (message, status) => {\n    if (status) {\n      toast.success(message, {\n        position: toast.POSITION.BOTTOM_RIGHT,\n        autoClose: 2000\n      })\n    } else {\n      toast.error(message, {\n        position: toast.POSITION.BOTTOM_RIGHT,\n        autoClose: 2000\n      })\n    }\n  }\n\n  return (\n    <CRow>\n      <CCol xs=\"12\" lg=\"12\">\n        <CCard>\n          <CCardHeader>\n            <strong>Danh sách lớp học</strong>\n          </CCardHeader>\n          <CCardBody className=\"text-center\">\n            {\n              loading.loadingGet ? <CSpinner\n                style={{ width: \"4rem\", height: \"4rem\" }}\n                color=\"info\"\n              /> : <CDataTable\n                  items={classRoomData}\n                  fields={fields}\n                  tableFilter\n                  hover\n                  scopedSlots={{\n                    'show_details':\n                      (item, index) => {\n                        return (\n                          <td className=\"py-2\">\n                            <CButton\n                              color=\"primary\"\n                              variant=\"outline\"\n                              shape=\"square\"\n                              size=\"sm\"\n                              onClick={() => { toggleDetails(index) }}\n                            >\n                              {details.includes(index) ? 'Hide' : 'Show'}\n                            </CButton>\n                          </td>\n                        )\n                      },\n                    'details':\n                      (item, index) => {\n                        return (\n                          <CCollapse show={details.includes(index)}>\n                            <CCardBody>\n                              <h4>\n                                {item.name}\n                              </h4>\n                              <p className=\"text-muted\">Updated at: {item.updated_at}</p>\n                              <Link to={`/classrooms/room/update/${item._id}`}>\n                                <CButton size=\"sm\" color=\"info\">Cập nhật</CButton>\n                              </Link>\n                              <CButton disabled={loading.loadingDelete} onClick={() => openModalDelete(true, item._id)} size=\"sm\" color=\"danger\" className=\"ml-1\">\n                                {loading.loadingDelete ? \"...Loading\" : \"Xoá\"}\n                              </CButton>\n                            </CCardBody>\n                          </CCollapse>\n                        )\n                      }\n                  }}\n                />\n            }\n          </CCardBody>\n          <CCardFooter>\n            <Link to=\"/classrooms/room/add\">\n              <CButton color=\"primary\" className=\"float-right\">Thêm lớp học</CButton>\n            </Link>\n          </CCardFooter>\n        </CCard>\n      </CCol>\n      <CModal\n        show={modal}\n        onClose={setModal}\n      >\n        <CModalHeader closeButton>\n          <CModalTitle>Xoá lớp học</CModalTitle>\n        </CModalHeader>\n        <CModalBody>\n          Bạn chắc chắn muốn xoá lớp học này ?\n        </CModalBody>\n        <CModalFooter>\n          <CButton disabled={loading.loadingDelete} color=\"primary\" onClick={() => deleteClassRoom()}>{loading.loadingDelete ? \"...Loading\" : \"Đồng ý\"}</CButton>{' '}\n          <CButton\n            color=\"secondary\"\n            onClick={() => setModal(false)}\n          >Huỷ</CButton>\n        </CModalFooter>\n      </CModal>\n    </CRow>\n  )\n}\n\nexport default Students\n"],"sourceRoot":""}